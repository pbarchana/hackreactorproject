<!doctype html>
<html lang="en" ng-app="app">
<head>
  <meta charset="UTF-8">
  <title>Sample Page</title>

  <script src="lib/angular/angular.js"></script>
  <!-- TODO: find a way to permanently edit panel in here -->
  <script src="lib/angular-bootstrap/ui-bootstrap-tpls.js"></script>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">

  <!-- Our styles -->
  <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">

  <!-- Scripts -->
  <script src="javascripts/app.js"></script>
  <script src="javascripts/services.js"></script>
  <script src="javascripts/controllers.js"></script>
  <script src="javascripts/directives.js"></script>
  <script src="javascripts/filters.js"></script>
</head>
<body>

  <!-- Tree Display Template for Accordian -->
  <script type="text/ng-template"  id="tree_item_renderer.html">
    <!-- Branches -->
    <div ng-if="!isPrimitive(value)">
      <accordion-group heading="{{ key }}" is-open="false">
        <div ng-repeat="(key, value) in value" ng-include="'tree_item_renderer.html'"></div>
      </accordion-group>
    </div>
    <!-- Leaves -->
    <div ng-if="isPrimitive(value)">
      <table class="table table-bordered table-striped dropdown-table">
        <tr>
          <td class="key"> {{key}} </td> <td> {{ value }} </td>
        </tr>
      </table>
    </div>
  </script>

  <!-- Main application -->
  <div ng-controller="dataCtrl">

    <!-- Loading gif -->
    <div ng-show="loading" class="loading">
      <img src="img/ajax-loader.gif"></img>
    </div>

    <div class="fluid-container">
      <div class="row top-buffer">
        <!-- Title -->
        <div class="col-sm-8 hover">
          <div class="title">NodePrime Visualizer</div>
        </div>
        <!-- Search Bar -->
        <div class="col-sm-4 hover">
          <div class="input-group">
            <input type="text" ng-model="liveSearch" class="form-control">
            <span class="input-group-btn">
              <button class="btn btn-primary" type="button"><span class="glyphicon glyphicon-search"></span></button>
            </span>
          </div>
        </div><!-- /.col-sm-4 -->
      </div><!-- /.row -->


      <div class="row">

        <!-- Accordian -->
        <div ng-show="selectedNode" class="col-sm-4 top-buffer hover">
          <div ng-controller="AccordionCtrl">

            <accordion close-others="oneAtATime">
              <table class="table table-bordered dropdown-table">
                <th> {{ selectedNode.type.toUpperCase() }}</th>
              <!-- Attributes -->
                <tr><td>
                  <accordion-group heading="Attributes" is-open="false">
                    <div ng-repeat="(key, value) in selectedNode.attributes" ng-include="'tree_item_renderer.html'"></div>
                  </accordion-group>
                </td></tr>
                  <!-- Components -->
                <tr><td>
                  <accordion-group heading="Components" is-open="false">
                    <div ng-repeat="(key, value) in selectedNode.components" ng-include="'tree_item_renderer.html'"></div>
                  </accordion-group>
                </td></tr>
              </table>
            </accordion>
          </div><!-- /.AccordianDemoCtrl -->
        </div><!-- /.col-sm-8 -->

        <!-- Live search results -->
        <div class="col-sm-4 pull-right hover">
          <div class="results">
            <div class="result" ng-click="select(node)" ng-show="liveSearch" style="cursor:hand" class="results" ng-repeat="node in nodes | filter:liveSearch | limitTo:5">
              <div>{{ node.type }}</div>
              <div class="info">Vendor: {{ node.attributes.vendor }}</div>
              <div class="info">UUID: {{ node.attributes.UUID }}</div>
            </div>
          </div><!-- /.results -->
        </div><!-- /.col-sm-4 -->
      </div><!-- /.row -->
    </div> <!-- /fluid-layout -->

    <!-- Angular Directive -->
    <div network-graph loading="loading" nwdata="ctldata"></div>
  </div><!-- /.dataCtrl -->


</body>
</html>
